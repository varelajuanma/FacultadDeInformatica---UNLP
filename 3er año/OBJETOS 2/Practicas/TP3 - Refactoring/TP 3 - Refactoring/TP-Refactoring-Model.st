Object subclass: #CuOOra	instanceVariableNames: 'users topics questions'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!CuOOra methodsFor: 'initialize' stamp: 'SergioFirmenich 4/22/2019 23:46'!initialize	users := OrderedCollection new.	topics := OrderedCollection new.	questions := OrderedCollection new! !!CuOOra methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 23:48'!questions	^ questions! !!CuOOra methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 23:48'!topics	^ topics! !!CuOOra methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 23:48'!users	^ users! !!CuOOra methodsFor: 'accessing'!sumAllPositiveVotes	^ questions sum: [ :question | question positiveVotes size ]! !!CuOOra methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/13/2020 07:50'!questionsFromToday	^questions select: [ :question | question timestamp asDate = Date today ] .! !!CuOOra methodsFor: 'adding' stamp: 'SergioFirmenich 4/22/2019 23:47'!addTopic: aTopic	topics add: aTopic ! !!CuOOra methodsFor: 'adding' stamp: 'SergioFirmenich 4/22/2019 23:47'!addQuestion: aQuestion	questions add: aQuestion! !!CuOOra methodsFor: 'adding' stamp: 'SDFirmenich 4/25/2019 12:59'!addQuestion: aQuestion forUser: aUser	aUser addQuestion: aQuestion.	questions add: aQuestion.! !!CuOOra methodsFor: 'adding' stamp: 'SergioFirmenich 4/22/2019 23:47'!addUser: aUser	users add: aUser ! !Object subclass: #Publication	instanceVariableNames: 'votes description timestamp user'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!Publication methodsFor: 'initialization'!initialize	votes := OrderedCollection new.	timestamp := DateAndTime now! !!Publication methodsFor: 'adding'!addVote: aVote	votes add: aVote! !!Publication methodsFor: 'private'!description: anObject	description := anObject! !!Publication methodsFor: 'private'!timestamp: anObject	timestamp := anObject! !!Publication methodsFor: 'private'!user: anObject	user := anObject! !!Publication methodsFor: 'accessing'!description	^ description! !!Publication methodsFor: 'accessing'!timestamp	^ timestamp! !!Publication methodsFor: 'accessing'!user	^ user! !!Publication methodsFor: 'accessing'!votes	^ votes! !!Publication methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/16/2020 10:26'!negativeVotes	^votes select: [ :vote | vote isLike = false ].! !!Publication methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/16/2020 10:26'!positiveVotes	^votes select: [ :vote | vote isLike ].! !Publication subclass: #Answer	instanceVariableNames: 'question'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!Answer methodsFor: 'private'!question: aQuestion		question := aQuestion! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Answer class	instanceVariableNames: ''!!Answer class methodsFor: 'instance creation'!new: anAnswer user: aUser question: aQuestion	^ self new		question: aQuestion;		        description: anAnswer;        user: aUser;		yourself! !Publication subclass: #Question	instanceVariableNames: 'title answers topics'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!Question methodsFor: 'initalize-release'!initialize	super initialize .	answers := OrderedCollection new.	topics := OrderedCollection new! !!Question methodsFor: 'accessing' stamp: 'SDFirmenich 4/23/2019 09:54'!title: aTitle	title := aTitle ! !!Question methodsFor: 'accessing' stamp: 'SDFirmenich 4/23/2019 09:54'!title	^title ! !!Question methodsFor: 'accessing' stamp: 'SergioFirmenich 4/23/2019 00:20'!topics	^topics ! !!Question methodsFor: 'adding' stamp: 'SDFirmenich 4/25/2019 13:29'!addTopic: aTopic	topics add: aTopic.	aTopic addQuestion: self.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Question class	instanceVariableNames: ''!!Question class methodsFor: 'instance creation'!newWithTitle: title description: aDescription user: aUser	^ self new		title: title;		        description: aDescription;        user: aUser;		yourself! !!Question class methodsFor: 'instance creation'!newWithTitle: title description: aDescription user: aUser topic: aTopic	^ self new        title: title;        description: aDescription;        addTopic: aTopic;        user: aUser;		yourself! !Object subclass: #QuestionRetriever	instanceVariableNames: 'cuoora'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!QuestionRetriever methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/13/2020 10:12'!retrieveFromUser: aUser	self subclassResponsibility .! !!QuestionRetriever methodsFor: 'accesing' stamp: 'SergioFirmenich 4/22/2019 08:09'!cuoora: aCuooraInstance	cuoora := aCuooraInstance ! !!QuestionRetriever methodsFor: 'retrieving' stamp: 'LautaroOleastro 5/16/2020 11:23'!retrieveQuestions: aUser	| retrievedQuestions |	retrievedQuestions := (self retrieveFromUser: aUser)		asSortedCollection: [ :a :b | a positiveVotes size > b positiveVotes size ].	^ (retrievedQuestions last: (100 min: retrievedQuestions size))		reject: [ :q | q user = aUser ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!QuestionRetriever class	instanceVariableNames: ''!!QuestionRetriever class methodsFor: 'instance creation' stamp: 'SergioFirmenich 4/22/2019 23:40'!new: cuoora	^ self new cuoora: cuoora! !QuestionRetriever subclass: #NewsRetriever	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!NewsRetriever methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:47'!retrieveFromUser: aUser	^ cuoora questionsFromToday! !QuestionRetriever subclass: #PopularTodayRetriever	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!PopularTodayRetriever methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:47'!retrieveFromUser: aUser	| averageVotes |	averageVotes := cuoora sumAllPositiveVotes / cuoora questionsFromToday size .	^(cuoora questionsFromToday		select: [ :question | question positiveVotes size >= averageVotes ]).! !QuestionRetriever subclass: #SocialRetriever	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!SocialRetriever methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:46'!retrieveFromUser: aUser	^aUser questionsFromFollowedUsers.! !Object subclass: #Topic	instanceVariableNames: 'name description questions'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:42'!name: anObject	name := anObject! !!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:42'!questions	^ questions! !!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:42'!description	^ description! !!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:42'!description: anObject	description := anObject! !!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:43'!addQuestion: aQuetion	questions add: aQuetion ! !!Topic methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 08:14'!name	^name! !!Topic methodsFor: 'initialize' stamp: 'SergioFirmenich 4/22/2019 08:14'!initialize	questions := OrderedCollection new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Topic class	instanceVariableNames: ''!!Topic class methodsFor: 'intance creation' stamp: 'SergioFirmenich 4/22/2019 23:39'!name: aName description: aDescription	^ self new		name: aName;		description: aDescription;		yourself! !QuestionRetriever subclass: #TopicsRetriever	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!TopicsRetriever methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:46'!retrieveFromUser: aUser	^aUser questionsFromFollowedTopics.! !Object subclass: #User	instanceVariableNames: 'questionRetriever questions answers username password topics following votes'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!User methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 07:50'!questionRetriever: aQuestionRetriever	questionRetriever := aQuestionRetriever.! !!User methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 07:50'!username: anObject	username := anObject! !!User methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 07:50'!password: anObject	password := anObject! !!User methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:19'!questionsFromFollowedUsers	^self following flatCollect: [ :user | user questions ].! !!User methodsFor: 'as yet unclassified' stamp: 'LautaroOleastro 5/15/2020 10:32'!questionsFromFollowedTopics	^self topics flatCollect: [ :topic | topic questions ].! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:43'!addAnswer: anAnswer	answers add: anAnswer ! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:43'!addQuestion: aQuestion	questions add: aQuestion! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!votes	^ votes! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!questionRetriever	^ questionRetriever! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:44'!questionsOfInterest	^ questionRetriever retrieveQuestions: self.! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!questions	^ questions! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!following	^ following! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!username	^ username! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!password	^ password! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!topics	^ topics! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 08:19'!addVote: aVote	votes add: aVote! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 07:50'!answers	^ answers! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 08:18'!follow: aUser	following add: aUser ! !!User methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:43'!addTopic: aTopic	topics add: aTopic ! !!User methodsFor: 'initialize' stamp: 'SergioFirmenich 4/23/2019 00:09'!initialize	questions := OrderedCollection new.  	answers := OrderedCollection new. 	topics := OrderedCollection new. 	following := OrderedCollection new. 	votes := OrderedCollection new.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!User class	instanceVariableNames: ''!!User class methodsFor: 'instance-creation' stamp: 'SergioFirmenich 4/22/2019 23:36'!username: aUsername password: aPassword questionRetriever: aQuestionRetriever	^ self new		username: aUsername;		password: aPassword;		questionRetriever: aQuestionRetriever;		yourself! !Object subclass: #Vote	instanceVariableNames: 'isLike timstamp publication user'	classVariableNames: ''	poolDictionaries: ''	category: 'TP-Refactoring-Model'!!Vote methodsFor: 'initialize' stamp: 'SergioFirmenich 4/22/2019 14:45'!initialize	isLike := true.	timstamp := DateAndTime now.	! !!Vote methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:47'!isLike	^ isLike! !!Vote methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:47'!publication	^ publication! !!Vote methodsFor: 'accessing' stamp: 'SergioFirmenich 4/22/2019 14:47'!user	^ user! !!Vote methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 23:37'!like	isLike := true.! !!Vote methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 14:47'!publication: anObject	publication := anObject! !!Vote methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 14:50'!dislike	isLike := false.! !!Vote methodsFor: 'private' stamp: 'SergioFirmenich 4/22/2019 14:47'!user: anObject	user := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Vote class	instanceVariableNames: ''!!Vote class methodsFor: 'instance creation' stamp: 'SergioFirmenich 4/22/2019 23:37'!user: aUser dislikesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		dislike;		yourself! !!Vote class methodsFor: 'instance creation' stamp: 'SergioFirmenich 4/22/2019 23:37'!user: aUser likesPublication: aPublication	^ self new		user: aUser;		publication: aPublication;		yourself! !