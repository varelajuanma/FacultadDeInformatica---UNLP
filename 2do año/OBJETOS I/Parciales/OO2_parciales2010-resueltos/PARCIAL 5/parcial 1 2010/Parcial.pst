<?xml version="1.0"?><st-source><!-- Name: ParcialDbIdentifier: nilDbTrace: nilPackageName: ParcialParcel: #('Parcial')PrintStringCache: nilDate: 8:26:02 pm December 17, 2010 --><time-stamp>From VisualWorksÂ® NonCommercial, 7.3.1 of April 20, 2005 on December 17, 2010 at 8:26:02 pm</time-stamp><do-it>(Dialog confirm: 'You are filing-in a Parcel source file!\\While this is possible it will not have\the same effect as loading the parcel.\None of the Parcel''s prerequisites will\be loaded and none of its load actions\will be performed.\\Are you sure you want to file-in?' withCRs) ifFalse: [self error: 'Parcel file-in abandoned.  Choose terminate or close.']</do-it><class><name>Llamada</name><environment>Smalltalk</environment><super>Core.Object</super><private>false</private><indexed-type>none</indexed-type><inst-vars>origen destino duracion </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>LlamadaIntraCompaniaNormal</name><environment>Smalltalk</environment><super>Llamada</super><private>false</private><indexed-type>none</indexed-type><inst-vars></inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>LlamadaIntraCompaniaNumeroAmigo</name><environment>Smalltalk</environment><super>Llamada</super><private>false</private><indexed-type>none</indexed-type><inst-vars></inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>Abonado</name><environment>Smalltalk</environment><super>Core.Object</super><private>false</private><indexed-type>none</indexed-type><inst-vars>nombre lineas </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>Compania</name><environment>Smalltalk</environment><super>Core.Object</super><private>false</private><indexed-type>none</indexed-type><inst-vars></inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>LlamadaInterCompania</name><environment>Smalltalk</environment><super>Llamada</super><private>false</private><indexed-type>none</indexed-type><inst-vars></inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><class><name>Linea</name><environment>Smalltalk</environment><super>Core.Object</super><private>false</private><indexed-type>none</indexed-type><inst-vars>compania amigas credito </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Parcial</category><attributes><package>Parcial</package></attributes></class><methods><class-id>Llamada</class-id> <category>accessing</category><body package="Parcial" selector="destino">destino	^destino</body><body package="Parcial" selector="destino:">destino: anObject	destino := anObject</body><body package="Parcial" selector="duracion">duracion	^duracion</body><body package="Parcial" selector="duracion:">duracion: anObject	duracion := anObject</body><body package="Parcial" selector="origen">origen	^origen</body><body package="Parcial" selector="origen:">origen: anObject	origen := anObject</body></methods><methods><class-id>Llamada</class-id> <category>initialize-release</category><body package="Parcial" selector="initializeOrigen:destino:duracion:">initializeOrigen: unaLinea destino: otraLinea duracion: minutos 	self origen: unaLinea.	self destino: otraLinea.	self duracion: minutos</body></methods><methods><class-id>Llamada</class-id> <category>operaciones</category><body package="Parcial" selector="descontarCredito">descontarCredito	"Descuenta el credito a la llamada origen.  Se implementa en cada subclase"	^self subclassResponsibility</body></methods><methods><class-id>Llamada class</class-id> <category>instance creation</category><body package="Parcial" selector="newOrigen:destino:duracion:">newOrigen: unaLinea destino: otraLinea duracion: minutos 	^super new 		initializeOrigen: unaLinea		destino: otraLinea		duracion: minutos</body></methods><methods><class-id>LlamadaIntraCompaniaNormal</class-id> <category>operaciones</category><body package="Parcial" selector="descontarCredito">descontarCredito	self origen descontarCredito: (self duracion / 2) ceiling	"ceiling es el redondeo para arriba.  Para 9 minutos descuenta 5."</body></methods><methods><class-id>LlamadaIntraCompaniaNumeroAmigo</class-id> <category>operaciones</category><body package="Parcial" selector="descontarCredito">descontarCredito	"No hace nada porque estas llamadas son gratuitas"	</body></methods><methods><class-id>Abonado</class-id> <category>accessing</category><body package="Parcial" selector="lineas">lineas	^lineas</body><body package="Parcial" selector="lineas:">lineas: anObject	lineas := anObject</body><body package="Parcial" selector="nombre">nombre	^nombre</body><body package="Parcial" selector="nombre:">nombre: anObject	nombre := anObject</body></methods><methods><class-id>Abonado</class-id> <category>initialize-release</category><body package="Parcial" selector="initialize">initialize	lineas := OrderedCollection new</body></methods><methods><class-id>Compania</class-id> <category>operaciones</category><body package="Parcial" selector="realizarComunicacionDesde:hacia:conDuracion:">realizarComunicacionDesde: unaLinea hacia: otraLinea conDuracion: minutos 	" La compania crea una instancia de LlamadaInterCompania, LlamadaIntraCompaniaNormal,LlamadaIntraCompaniaNumeroAmigo, todas subclases de Llamada"	| llamada |	llamada := unaLinea crearLlamadaA: otraLinea duracion: minutos.	llamada descontarCredito.	^llamada</body></methods><methods><class-id>LlamadaInterCompania</class-id> <category>operaciones</category><body package="Parcial" selector="descontarCredito">descontarCredito	self origen descontarCredito: self duracion</body></methods><methods><class-id>Linea</class-id> <category>operaciones</category><body package="Parcial" selector="agregarAmiga:">agregarAmiga: otraLinea 	self amigas add: otraLinea</body><body package="Parcial" selector="crearLlamadaA:duracion:">crearLlamadaA: otraLinea duracion: minutos 	"Crea la llamada correspondiene a las lineas involucradas"	(self esAmiga: otraLinea) 		ifTrue: 			[^LlamadaIntraCompaniaNumeroAmigo 				newOrigen: self				destino: otraLinea				duracion: minutos].	(self mismaCompania: otraLinea) 		ifTrue: 			[^LlamadaIntraCompaniaNormal 				newOrigen: self				destino: otraLinea				duracion: minutos].	^LlamadaInterCompania 		newOrigen: self		destino: otraLinea		duracion: minutos</body><body package="Parcial" selector="descontarCredito:">descontarCredito: unaCantidad 	self credito: self credito - unaCantidad</body><body package="Parcial" selector="esAmiga:">esAmiga: otraLinea 	^self amigas includes: otraLinea</body><body package="Parcial" selector="mismaCompania:">mismaCompania: otraLinea 	^self compania = otraLinea compania</body></methods><methods><class-id>Linea</class-id> <category>accessing</category><body package="Parcial" selector="amigas">amigas	^amigas</body><body package="Parcial" selector="amigas:">amigas: anObject	amigas := anObject</body><body package="Parcial" selector="compania">compania	^compania</body><body package="Parcial" selector="compania:">compania: anObject	compania := anObject</body><body package="Parcial" selector="credito">credito	^credito</body><body package="Parcial" selector="credito:">credito: anObject	credito := anObject</body></methods><methods><class-id>Linea</class-id> <category>initialize-release</category><body package="Parcial" selector="initializeConCompania:">initializeConCompania: unaCompania 	self compania: unaCompania.	self amigas: OrderedCollection new.	self credito: 0</body></methods><methods><class-id>Linea class</class-id> <category>instance creation</category><body package="Parcial" selector="newCompania:">newCompania: unaCompania 	^super new initializeConCompania: unaCompania</body></methods><do-it>"Imported Classes:"</do-it><do-it>self error: 'Attempting to file-in parcel imports.  Choose terminate or close'</do-it><class><name>Object</name><environment>Core</environment><super></super><private>false</private><indexed-type>none</indexed-type><inst-vars></inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Kernel-Objects</category><attributes><package>Kernel-Objects</package></attributes></class></st-source>